######################################################
#####    Описание используемых bash скриптов:    #####
######################################################

1) Общее количество запросов:
   wc -l access.log
   - с опцией -l считает количество строк в файле


2) Общее количество запросов по типу:
    awk '{print $6}' access.log | sort | uniq -c | sort -rn
    - awk '{print $6}' access.log - вывод 6 колонки (содержащей метод)
    - sort - посточная сортировка, необходима для следующей команды
    - uniq -c - выводит каждую строку и сколько раз она встречается
    - sort -rn - сортировка по частоте вхождения строки


3) Топ 10 самых частых запросов:
    awk '{print $7}' access.log | sort | uniq -c | sort -rn | head -n 10
    - awk '{print $7}' access.log - вывод 7 колонки (содержащей location)
    - sort - посточная сортировка, необходима для следующей команды
    - uniq -c - выводит каждую строку и сколько раз она встречается
    - sort -rn - сортировка по частоте вхождения строки по убыванию
    - head -n 10 - вывод 10 первых значений


4) Топ 5 самых больших по размеру запросов, которые завершились клиентской (4ХХ) ошибкой:
    awk '{print $7, $9, $10, $1}' access.log | grep ' 4.. ' | sort -rn -k3 | head -n 5
    - awk '{print $7, $9, $10, $1}' access.log - вывод 7, 9, 10, 1 колонки (url, статус код, размер запроса, ip адрес)
    - grep ' 4.. ' - поиск по паттерну ' 4xx '
    - sort -rn -k3 - числовая сортировка по значениям третьей колонки по убыванию
    - head -n 5 - вывод 5 первых значений


5) Топ 5 пользователей по количеству запросов, которые завершились серверной (5ХХ) ошибкой:
    awk '{print $1, $9}' access.log | grep ' 5.. ' | awk '{print $1}' | sort | uniq -c | sort -rn | head -n 5
   - awk '{print $1, $9}' access.log - вывод 1, 9 колонки (ip, status code)
   - grep ' 5.. ' - поиск по паттерну ' 5xx '
   - awk '{print $1}' - вывод только 1 колонки (ip)
   - sort - посточная сортировка, необходима для следующей команды
   - uniq -c - выводит каждую строку и сколько раз она встречается
   - sort -rn - сортировка по частоте вхождения строки по убыванию
   - head -n 5 - вывод 5 первых значений